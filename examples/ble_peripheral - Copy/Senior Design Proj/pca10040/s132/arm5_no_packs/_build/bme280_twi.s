; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--c99 --split_sections --debug -c -S --reduce_paths -o.\_build\bme280_twi.s --depend=.\_build\bme280_twi.d --cpu=Cortex-M4.fp --apcs=interwork -O3 --diag_suppress=9931 -I..\..\..\config\ble_app_uart_pca10040_s132 -I..\..\..\config -I..\..\..\..\..\..\components -I..\..\..\..\..\..\components\ble\ble_advertising -I..\..\..\..\..\..\components\ble\ble_dtm -I..\..\..\..\..\..\components\ble\ble_racp -I..\..\..\..\..\..\components\ble\ble_services\ble_ancs_c -I..\..\..\..\..\..\components\ble\ble_services\ble_ans_c -I..\..\..\..\..\..\components\ble\ble_services\ble_bas -I..\..\..\..\..\..\components\ble\ble_services\ble_bas_c -I..\..\..\..\..\..\components\ble\ble_services\ble_cscs -I..\..\..\..\..\..\components\ble\ble_services\ble_cts_c -I..\..\..\..\..\..\components\ble\ble_services\ble_dfu -I..\..\..\..\..\..\components\ble\ble_services\ble_dis -I..\..\..\..\..\..\components\ble\ble_services\ble_gls -I..\..\..\..\..\..\components\ble\ble_services\ble_hids -I..\..\..\..\..\..\components\ble\ble_services\ble_hrs -I..\..\..\..\..\..\components\ble\ble_services\ble_hrs_c -I..\..\..\..\..\..\components\ble\ble_services\ble_hts -I..\..\..\..\..\..\components\ble\ble_services\ble_ias -I..\..\..\..\..\..\components\ble\ble_services\ble_ias_c -I..\..\..\..\..\..\components\ble\ble_services\ble_lbs -I..\..\..\..\..\..\components\ble\ble_services\ble_lbs_c -I..\..\..\..\..\..\components\ble\ble_services\ble_lls -I..\..\..\..\..\..\components\ble\ble_services\ble_nus -I..\..\..\..\..\..\components\ble\ble_services\ble_nus_c -I..\..\..\..\..\..\components\ble\ble_services\ble_rscs -I..\..\..\..\..\..\components\ble\ble_services\ble_rscs_c -I..\..\..\..\..\..\components\ble\ble_services\ble_tps -I..\..\..\..\..\..\components\ble\common -I..\..\..\..\..\..\components\ble\nrf_ble_gatt -I..\..\..\..\..\..\components\ble\nrf_ble_qwr -I..\..\..\..\..\..\components\ble\peer_manager -I..\..\..\..\..\..\components\boards -I..\..\..\..\..\..\components\drivers_nrf\clock -I..\..\..\..\..\..\components\drivers_nrf\common -I..\..\..\..\..\..\components\drivers_nrf\comp -I..\..\..\..\..\..\components\drivers_nrf\delay -I..\..\..\..\..\..\components\drivers_nrf\gpiote -I..\..\..\..\..\..\components\drivers_nrf\hal -I..\..\..\..\..\..\components\drivers_nrf\i2s -I..\..\..\..\..\..\components\drivers_nrf\lpcomp -I..\..\..\..\..\..\components\drivers_nrf\pdm -I..\..\..\..\..\..\components\drivers_nrf\power -I..\..\..\..\..\..\components\drivers_nrf\ppi -I..\..\..\..\..\..\components\drivers_nrf\pwm -I..\..\..\..\..\..\components\drivers_nrf\qdec -I..\..\..\..\..\..\components\drivers_nrf\rng -I..\..\..\..\..\..\components\drivers_nrf\rtc -I..\..\..\..\..\..\components\drivers_nrf\saadc -I..\..\..\..\..\..\components\drivers_nrf\spi_master -I..\..\..\..\..\..\components\drivers_nrf\spi_slave -I..\..\..\..\..\..\components\drivers_nrf\swi -I..\..\..\..\..\..\components\drivers_nrf\timer -I..\..\..\..\..\..\components\drivers_nrf\twi_master -I..\..\..\..\..\..\components\drivers_nrf\twis_slave -I..\..\..\..\..\..\components\drivers_nrf\uart -I..\..\..\..\..\..\components\drivers_nrf\usbd -I..\..\..\..\..\..\components\drivers_nrf\wdt -I..\..\..\..\..\..\components\libraries\bsp -I..\..\..\..\..\..\components\libraries\button -I..\..\..\..\..\..\components\libraries\crc16 -I..\..\..\..\..\..\components\libraries\crc32 -I..\..\..\..\..\..\components\libraries\csense -I..\..\..\..\..\..\components\libraries\csense_drv -I..\..\..\..\..\..\components\libraries\ecc -I..\..\..\..\..\..\components\libraries\experimental_section_vars -I..\..\..\..\..\..\components\libraries\fds -I..\..\..\..\..\..\components\libraries\fifo -I..\..\..\..\..\..\components\libraries\fstorage -I..\..\..\..\..\..\components\libraries\gpiote -I..\..\..\..\..\..\components\libraries\hardfault -I..\..\..\..\..\..\components\libraries\hci -I..\..\..\..\..\..\components\libraries\led_softblink -I..\..\..\..\..\..\components\libraries\log -I..\..\..\..\..\..\components\libraries\log\src -I..\..\..\..\..\..\components\libraries\low_power_pwm -I..\..\..\..\..\..\components\libraries\mem_manager -I..\..\..\..\..\..\components\libraries\pwm -I..\..\..\..\..\..\components\libraries\queue -I..\..\..\..\..\..\components\libraries\scheduler -I..\..\..\..\..\..\components\libraries\slip -I..\..\..\..\..\..\components\libraries\strerror -I..\..\..\..\..\..\components\libraries\timer -I..\..\..\..\..\..\components\libraries\twi -I..\..\..\..\..\..\components\libraries\uart -I..\..\..\..\..\..\components\libraries\usbd -I..\..\..\..\..\..\components\libraries\usbd\class\audio -I..\..\..\..\..\..\components\libraries\usbd\class\cdc -I..\..\..\..\..\..\components\libraries\usbd\class\cdc\acm -I..\..\..\..\..\..\components\libraries\usbd\class\hid -I..\..\..\..\..\..\components\libraries\usbd\class\hid\generic -I..\..\..\..\..\..\components\libraries\usbd\class\hid\kbd -I..\..\..\..\..\..\components\libraries\usbd\class\hid\mouse -I..\..\..\..\..\..\components\libraries\usbd\class\msc -I..\..\..\..\..\..\components\libraries\usbd\config -I..\..\..\..\..\..\components\libraries\util -I..\..\..\..\..\..\components\softdevice\common\softdevice_handler -I..\..\..\..\..\..\components\softdevice\s132\headers -I..\..\..\..\..\..\components\softdevice\s132\headers\nrf52 -I..\..\..\..\..\..\components\toolchain -I..\..\..\..\..\..\external\segger_rtt -I..\config -I.\RTE\_nrf52832_xxaa -IC:\Users\Daniel\AppData\Local\Arm\Packs\ARM\CMSIS\4.5.0\CMSIS\Include -IC:\Users\Daniel\AppData\Local\Arm\Packs\NordicSemiconductor\nRF_DeviceFamilyPack\8.12.0\Device\Include -D__MICROLIB -D__UVISION_VERSION=528 -D_RTE_ -DNRF52 -DBLE_STACK_SUPPORT_REQD -DBOARD_PCA10040 -DCONFIG_GPIO_AS_PINRESET -DNRF52 -DNRF52832_XXAA -DNRF52_PAN_12 -DNRF52_PAN_15 -DNRF52_PAN_20 -DNRF52_PAN_31 -DNRF52_PAN_36 -DNRF52_PAN_51 -DNRF52_PAN_54 -DNRF52_PAN_55 -DNRF52_PAN_58 -DNRF52_PAN_64 -DNRF52_PAN_74 -DNRF_SD_BLE_API_VERSION=4 -DS132 -DSOFTDEVICE_PRESENT -DSWI_DISABLE0 --omf_browse=.\_build\bme280_twi.crf ..\..\..\..\..\..\components\drivers_nrf\BME280\bme280_twi.c]
        THUMB
        REQUIRE8
        PRESERVE8

        AREA ||i._read||, CODE, READONLY, ALIGN=2

_read PROC
        PUSH     {r0-r2,lr}
        LDR      r0,|L0.60|
        SUB      sp,sp,#0x10
        MOVS     r3,#0
        STRB     r3,[r0,#0]
        LDRB     r3,[sp,#0x10]
        STRB     r3,[r0,#1]
        LDR      r3,|L0.64|
        LDR      r3,[r3,#0]  ; <Data1>
        STR      r3,[sp,#0]
        LDRB     r3,[r0,#2]  ; m_addr
        STRB     r3,[sp,#1]
        STRB     r2,[sp,#3]
        ADD      r2,sp,#0x10
        STRD     r2,r1,[sp,#4]
        MOVS     r2,#0
        MOV      r1,sp
        LDR      r0,[r0,#8]  ; m_twi_ptr
        BL       nrf_drv_twi_xfer
        CMP      r0,#0
        BEQ      |L0.56|
        BL       app_error_handler_bare
|L0.56|
        ADD      sp,sp,#0x1c
        POP      {pc}
        ENDP

|L0.60|
        DCD      ||.data||
|L0.64|
        DCD      ||.constdata||

        AREA ||i._write_blocking||, CODE, READONLY, ALIGN=2

_write_blocking PROC
        PUSH     {r2-r4,lr}
        LDR      r4,|L1.48|
        MOVS     r2,#0
        STRB     r2,[r4,#0]
        STRB     r0,[sp,#4]
        STR      r2,[sp,#0]
        STRB     r1,[sp,#5]
        MOVS     r3,#2
        ADD      r2,sp,#4
        LDRB     r1,[r4,#2]  ; m_addr
        LDR      r0,[r4,#8]  ; m_twi_ptr
        BL       nrf_drv_twi_tx
        CBZ      r0,|L1.36|
        BL       app_error_handler_bare
|L1.36|
        WFE      
        LDRB     r0,[r4,#0]  ; m_xfer_done
        CMP      r0,#0
        BEQ      |L1.36|
        POP      {r2-r4,pc}
        ENDP

        DCW      0x0000
|L1.48|
        DCD      ||.data||

        AREA ||i.bme280_twi_enable||, CODE, READONLY, ALIGN=2

bme280_twi_enable PROC
        LDR      r0,|L2.12|
        LDRB     r1,[r0,#3]  ; m_ctrl_meas
        MOVS     r0,#0xf4
        B.W      _write_blocking
        ENDP

        DCW      0x0000
|L2.12|
        DCD      ||.data||

        AREA ||i.bme280_twi_evt_handler||, CODE, READONLY, ALIGN=2

bme280_twi_evt_handler PROC
        PUSH     {r3-r5,lr}
        LDRB     r1,[r0,#0]
        CMP      r1,#0
        BNE      |L3.62|
        LDRB     r0,[r0,#4]
        LDR      r4,|L3.64|
        CMP      r0,#2
        BNE      |L3.58|
        LDRB     r0,[r4,#1]  ; m_rx_reg
        CMP      r0,#0xfa
        BNE      |L3.54|
        LDR      r0,|L3.68|
        LDRB     r1,[r0,#0]
        LDRB     r0,[r0,#1]
        LSLS     r2,r1,#12
        ORR      r0,r2,r0,LSL #4
        ORR      r0,r0,r1,LSR #4
        STR      r0,[r4,#4]  ; m_temp_raw
        MOVS     r0,#0
        STRB     r0,[sp,#0]
        LDRD     r2,r1,[r4,#0xc]
        MOV      r0,sp
        BLX      r2
|L3.54|
        MOVS     r0,#0
        STRB     r0,[r4,#1]
|L3.58|
        MOVS     r0,#1
        STRB     r0,[r4,#0]
|L3.62|
        POP      {r3-r5,pc}
        ENDP

|L3.64|
        DCD      ||.data||
|L3.68|
        DCD      ||.bss||

        AREA ||i.bme280_twi_init||, CODE, READONLY, ALIGN=2

bme280_twi_init PROC
        PUSH     {r4-r6,lr}
        LDR      r4,|L4.100|
        MOV      r5,r1
        ADD      r1,r4,#8
        STM      r1,{r0,r2,r3}
        LDRB     r0,[r5,#0]
        STRB     r0,[r4,#2]
        MOVS     r0,#0x89
        LDR      r1,|L4.104|
        MOVS     r2,#6
        BL       _read
|L4.28|
        WFE      
        LDRB     r0,[r4,#0]  ; m_xfer_done
        CMP      r0,#0
        BEQ      |L4.28|
        LDR      r0,|L4.104|
        LDRH     r1,[r0,#0]  ; m_buf
        REV16    r1,r1
        SXTH     r1,r1
        STR      r1,[r4,#0x14]  ; m_dig_T1
        LDRH     r1,[r0,#2]  ; m_buf
        REV16    r1,r1
        SXTH     r1,r1
        STR      r1,[r4,#0x18]  ; m_dig_T2
        LDRH     r0,[r0,#4]  ; m_buf
        REV16    r0,r0
        SXTH     r0,r0
        STR      r0,[r4,#0x1c]  ; m_dig_T3
        LDRB     r0,[r5,#1]
        LDRB     r1,[r5,#2]
        LSLS     r0,r0,#5
        ORR      r0,r0,r1,LSL #2
        UXTB     r1,r0
        MOVS     r0,#0xf5
        BL       _write_blocking
        MOVS     r1,#0
        MOVS     r0,#0xf2
        BL       _write_blocking
        LDRB     r0,[r5,#3]
        MOVS     r1,#3
        ADD      r0,r1,r0,LSL #5
        STRB     r0,[r4,#3]
        POP      {r4-r6,pc}
        ENDP

|L4.100|
        DCD      ||.data||
|L4.104|
        DCD      ||.bss||

        AREA ||i.bme280_twi_measurement_fetch||, CODE, READONLY, ALIGN=2

bme280_twi_measurement_fetch PROC
        MOVS     r2,#3
        LDR      r1,|L5.12|
        MOVS     r0,#0xfa
        B.W      _read
        ENDP

        DCW      0x0000
|L5.12|
        DCD      ||.bss||

        AREA ||i.bme280_twi_measurement_get||, CODE, READONLY, ALIGN=2

bme280_twi_measurement_get PROC
        PUSH     {r4,r5,lr}
        LDR      r1,|L6.48|
        LDR      r2,[r1,#4]  ; m_temp_raw
        LDR      r4,[r1,#0x14]  ; m_dig_T1
        ASRS     r3,r2,#3
        LDR      r5,[r1,#0x18]  ; m_dig_T2
        RSB      r2,r4,r2,ASR #4
        SUB      r3,r3,r4,LSL #1
        MULS     r2,r2,r2
        LDR      r1,[r1,#0x1c]  ; m_dig_T3
        MULS     r3,r5,r3
        ASRS     r2,r2,#12
        ASRS     r3,r3,#11
        MULS     r2,r1,r2
        ADD      r1,r3,r2,ASR #14
        ADD      r1,r1,r1,LSL #2
        ADDS     r1,r1,#0x80
        ASRS     r1,r1,#8
        STR      r1,[r0,#0]
        POP      {r4,r5,pc}
        ENDP

|L6.48|
        DCD      ||.data||

        AREA ||.arm_vfe_header||, DATA, READONLY, NOALLOC, ALIGN=2

        DCD      0x00000000

        AREA ||.bss||, DATA, NOINIT, ALIGN=0

m_buf
        %        9

        AREA ||.constdata||, DATA, READONLY, ALIGN=2

        DCB      0x02,0x00,0x01,0x00
        DCD      0x00000000
        DCD      0x00000000

        AREA ||.data||, DATA, ALIGN=2

m_xfer_done
        DCB      0x00
m_rx_reg
        DCB      0x00
m_addr
        DCB      0x00
m_ctrl_meas
        DCB      0x00
m_temp_raw
        DCD      0x00000000
m_twi_ptr
        DCD      0x00000000
m_handler
        DCD      0x00000000
m_context
        DCD      0x00000000
m_dig_T1
        DCD      0x00000000
m_dig_T2
        DCD      0x00000000
m_dig_T3
        DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\..\\..\\..\\..\\..\\components\\drivers_nrf\\BME280\\bme280_twi.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___12_bme280_twi_c_6034cf2a____REV16|
#line 388 "C:\\Users\\Daniel\\AppData\\Local\\Arm\\Packs\\ARM\\CMSIS\\4.5.0\\CMSIS\\Include\\cmsis_armcc.h"
|__asm___12_bme280_twi_c_6034cf2a____REV16| PROC
#line 389

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___12_bme280_twi_c_6034cf2a____REVSH|
#line 402
|__asm___12_bme280_twi_c_6034cf2a____REVSH| PROC
#line 403

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.rrx_text||, CODE
	THUMB
	EXPORT |__asm___12_bme280_twi_c_6034cf2a____RRX|
#line 587
|__asm___12_bme280_twi_c_6034cf2a____RRX| PROC
#line 588

 rrx r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***

        EXPORT bme280_twi_enable [CODE]
        EXPORT bme280_twi_evt_handler [CODE]
        EXPORT bme280_twi_init [CODE]
        EXPORT bme280_twi_measurement_fetch [CODE]
        EXPORT bme280_twi_measurement_get [CODE]

        IMPORT ||Lib$$Request$$armlib|| [CODE,WEAK]
        IMPORT nrf_drv_twi_tx [CODE]
        IMPORT app_error_handler_bare [CODE]
        IMPORT nrf_drv_twi_xfer [CODE]

        KEEP _read
        KEEP _write_blocking
        KEEP m_buf
        KEEP m_xfer_done
        KEEP m_rx_reg
        KEEP m_addr
        KEEP m_ctrl_meas
        KEEP m_temp_raw
        KEEP m_twi_ptr
        KEEP m_handler
        KEEP m_context
        KEEP m_dig_T1
        KEEP m_dig_T2
        KEEP m_dig_T3

        ATTR FILESCOPE
        ATTR SETVALUE Tag_ABI_PCS_wchar_t,2
        ATTR SETVALUE Tag_ABI_enum_size,1
        ATTR SETVALUE Tag_ABI_optimization_goals,3
        ATTR SETSTRING Tag_conformance,"2.09"
        ATTR SETVALUE AV,18,1

        ASSERT {ENDIAN} = "little"
        ASSERT {INTER} = {TRUE}
        ASSERT {ROPI} = {FALSE}
        ASSERT {RWPI} = {FALSE}
        ASSERT {IEEE_FULL} = {FALSE}
        ASSERT {IEEE_PART} = {FALSE}
        ASSERT {IEEE_JAVA} = {FALSE}
        END
